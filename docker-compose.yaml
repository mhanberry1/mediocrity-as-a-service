services:

  web:
    image: nginx
    ports:
      - 80:80
    volumes:
      - ./web:/usr/share/nginx/html/
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
      - nginx-etc:/etc/nginx
      - nginx-usr-share:/usr/share/nginx
  certbot: 
    build:
      dockerfile: Dockerfile.certbot
    volumes:
      - nginx-etc:/etc/nginx
      - nginx-usr-share:/usr/share/nginx
    command: certbot --non-interactive --agree-tos -m mhanberry1@gmail.com --domains maastalent.com,www.maastalent.com,api.maastalent.com --nginx

volumes:
  nginx-etc:
  nginx-usr-share:
